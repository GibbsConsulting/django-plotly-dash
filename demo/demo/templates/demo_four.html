{%extends "base.html"%}
{%load plotly_dash%}

{%block post_body%}{%plotly_message_pipe%}{%endblock%}

{%block title%}Demo Four - Live Updating{%endblock%}

{%block content%}
<h1>Live Updating</h1>
<p>
  Live updating uses a websocket connection. The server pushes messages to the UI, and this is then translated into a
  callback through a dash component.
</p>
<div class="card bg-light border-dark">
  <div class="card-body">
    <p><span>{</span>% load plotly_dash %}</p>
    <p><span>{</span>% plotly_message_pipe %}</p>
    <p><span>{</span>% plotly_app name="LiveInput" %}</p>
    <p><span>{</span>% plotly_app name="LiveOutput" %}</p>
    <p><span>{</span>% plotly_app slug="liveoutput-2" %}</p>
  </div>
</div>
<p>
</p>
<div class="card border-dark">
  <div class="card-body">
    {%plotly_app name="LiveInput"%}
  </div>
</div>
<p>
</p>
<div class="card border-dark">
  <div class="card-body">
    {%plotly_app name="LiveOutput" ratio=0.5 %}
  </div>
</div>
<p>
</p>
<div class="card border-dark">
  <div class="card-body">
    {%plotly_app slug="liveoutput-2" ratio=0.5 %}
  </div>
</div>
<p>
</p>
<p>
  Any http command
  can be used to send a message to the apps. This is equiavent to a press of
  the red button. Other colours can be specified, including yellow, cyan and black in
  addition to the three named in the LiveInput app.
</p>
<div class="card bg-light border-dark">
  <div class="card-body">
    curl http://localhost:8000/dpd/views/poke/ -d'{"channel_name":"live_button_counter","label":"named_counts","value":{"click_colour":"red"}}'
  </div>
</div>
{%endblock%}
